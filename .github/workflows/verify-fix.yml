name: ğŸ” Verify Workflow Fix

on:
  workflow_dispatch:
  push:
    paths:
      - '.github/workflows/**'

env:
  ACTIONS_RUNNER_DEBUG: true

jobs:
  verify:
    name: âœ… Verify GitHub Actions Work
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ“¦ Checkout
        uses: actions/checkout@v4
      
      - name: âš™ï¸ Setup Node.js  
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          
      - name: ğŸ§  Environment Info
        run: |
          echo "ğŸ–¥ï¸ OS: $(uname -a)"
          echo "ğŸ”§ Architecture: $(arch)"
          echo "ğŸ“Š Runner: ${{ runner.os }}"
          echo "ğŸ“± GitHub Event: ${{ github.event_name }}"
          
      - name: âœ… Validate package.json
        run: |
          echo "ğŸ“ Validating package.json schema..."
          node -e "import fs from 'fs'; const pkg = JSON.parse(fs.readFileSync('package.json')); if (!pkg.name || !pkg.version) throw new Error('Missing name or version'); console.log('âœ… package.json is valid');"
          
      - name: ğŸ” Workflow YAML Validation
        run: |
          echo "ğŸ” Checking all workflow files..."
          for file in .github/workflows/*.yml; do
            echo "Validating: $file"
            node -e "import yaml from 'js-yaml'; import fs from 'fs'; yaml.load(fs.readFileSync('$file', 'utf8')); console.log('âœ…', '$file', 'is valid');"
          done
          
      - name: ğŸ¯ Test Basic Commands
        run: |
          echo "âœ… RinaWarp Terminal Enterprise"
          echo "ğŸŒŠ GitHub Actions is working!"
          echo "ğŸ“¦ Package: $(node -e "import fs from 'fs'; const pkg = JSON.parse(fs.readFileSync('package.json')); console.log(pkg.name)")"
          echo "ğŸ·ï¸ Version: $(node -e "import fs from 'fs'; const pkg = JSON.parse(fs.readFileSync('package.json')); console.log(pkg.version)")"
          echo "ğŸ“‹ Node.js version: $(node --version)"
          echo "ğŸ“Š npm version: $(npm --version)"
          
      - name: ğŸ§œâ€â™€ï¸ Success Report
        run: |
          echo "ğŸ‰ GitHub Workflows are now functioning properly!"
          echo "âœ… YAML syntax validated"  
          echo "âœ… Node.js environment working"
          echo "âœ… Repository access confirmed"
          echo "âœ… ES module compatibility verified"
          echo ""
          echo "ğŸš€ You can now use GitHub Actions for CI/CD"
