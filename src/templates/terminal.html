<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="RinaWarp Terminal - Advanced terminal emulator with AI assistance and modern web technologies">
    <meta name="keywords" content="terminal, emulator, web, xterm, AI, voice, plugins">
    
    <title>RinaWarp Terminal</title>


</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loading-screen">
        <div class="loading-logo">ðŸ¦¾</div>
        <div class="loading-text">RinaWarp Terminal</div>
        <div class="loading-progress">
            <div class="loading-progress-bar" id="loading-progress"></div>
        </div>
        <div class="loading-status" id="loading-status">Initializing...</div>
    </div>

    <!-- Main Application -->
    <div class="terminal-app" id="terminal-app">
        <!-- Header -->
        <header class="terminal-header">
            <div class="terminal-logo">
                RinaWarp Terminal
                <span class="sr-only">Version <span id="version-info"></span></span>
            </div>
            <nav class="terminal-controls">
                <button class="terminal-btn" id="features-btn" title="Show loaded features">
                    Features
                </button>
                <button class="terminal-btn" id="sidebar-btn" title="Toggle sidebar">
                    Sidebar
                </button>
                <button class="terminal-btn" id="settings-btn" title="Settings">
                    Settings
                </button>
            </nav>
        </header>

        <!-- Main Content -->
        <main class="terminal-main">
            <div class="terminal-container">
                <div id="terminal" role="application" aria-label="Terminal interface">
                    <!-- Terminal will be initialized here -->
                </div>
            </div>

            <aside class="terminal-sidebar" id="sidebar">
                <div class="sidebar-content">
                    <h3>Feature Panel</h3>
                    <div id="sidebar-content">
                        <p>Use commands to load features:</p>
                        <ul>
                            <li><code>load-ai</code> - AI Assistant</li>
                            <li><code>load-voice</code> - Voice Engine</li>
                            <li><code>load-plugins</code> - Plugin System</li>
                            <li><code>features</code> - Show status</li>
                        </ul>
                    </div>
                </div>
            </aside>
        </main>

        <!-- Footer -->
        <footer class="terminal-footer">
            <div class="footer-left">
                <span id="status-indicator">Ready</span>
                <span>Features: <span id="features-count">1</span></span>
            </div>
            <div class="footer-right">
                <span id="current-time"></span>
            </div>
        </footer>
    </div>

    <!-- Error Container -->
    <div class="error-container" id="error-container">
        <h2 class="error-title">ðŸš¨ Error</h2>
        <div class="error-message" id="error-message"></div>
        <div class="error-actions">
            <button class="error-btn" id="error-retry">Retry</button>
            <button class="error-btn primary" id="error-reload">Reload Page</button>
        </div>
    </div>

    <!-- Application Bootstrap -->
    <script>
        // Bootstrap script for loading management
        window.RinaWarpBootstrap = {
            progress: 0,
            status: 'Initializing...',
            
            updateProgress(percent, status) {
                this.progress = percent;
                this.status = status;
                
                const progressBar = document.getElementById('loading-progress');
                const statusText = document.getElementById('loading-status');
                
                if (progressBar) progressBar.style.width = `${percent}%`;
                if (statusText) statusText.textContent = status;
            },
            
            showError(title, message, actions = {}) {
                const errorContainer = document.getElementById('error-container');
                const errorTitle = document.querySelector('.error-title');
                const errorMessage = document.getElementById('error-message');
                
                if (errorTitle) errorTitle.textContent = title;
                if (errorMessage) errorMessage.textContent = message;
                if (errorContainer) errorContainer.classList.add('show');
                
                // Set up action handlers
                const retryBtn = document.getElementById('error-retry');
                const reloadBtn = document.getElementById('error-reload');
                
                if (retryBtn && actions.onRetry) {
                    retryBtn.onclick = actions.onRetry;
                }
                
                if (reloadBtn) {
                    reloadBtn.onclick = () => window.location.reload();
                }
            },
            
            hideLoading() {
                const loadingScreen = document.getElementById('loading-screen');
                const terminalApp = document.getElementById('terminal-app');
                
                if (loadingScreen) {
                    loadingScreen.classList.add('fade-out');
                    setTimeout(() => {
                        loadingScreen.style.display = 'none';
                    }, 500);
                }
                
                if (terminalApp) {
                    terminalApp.classList.add('loaded');
                }
            },
            
            updateTime() {
                const timeElement = document.getElementById('current-time');
                if (timeElement) {
                    timeElement.textContent = new Date().toLocaleTimeString();
                }
            },
            
            setupUI() {
                // Set up basic UI interactions
                const sidebarBtn = document.getElementById('sidebar-btn');
                const sidebar = document.getElementById('sidebar');
                
                if (sidebarBtn && sidebar) {
                    sidebarBtn.onclick = () => {
                        sidebar.classList.toggle('open');
                    };
                }
                
                // Start time updates
                this.updateTime();
                setInterval(() => this.updateTime(), 1000);
                
                // Update version info
                const versionInfo = document.getElementById('version-info');
                if (versionInfo && window.RinaWarp?.version) {
                    versionInfo.textContent = window.RinaWarp.version;
                }
            }
        };
        
        // Initialize bootstrap
        document.addEventListener('DOMContentLoaded', () => {
            window.RinaWarpBootstrap.setupUI();
            window.RinaWarpBootstrap.updateProgress(10, 'Loading dependencies...');
        });
        
        // Handle global errors
        window.addEventListener('error', (event) => {
            console.error('Global error:', event.error);
            window.RinaWarpBootstrap.showError(
                'ðŸš¨ Application Error',
                `An error occurred: ${event.error.message}`,
                {
                    onRetry: () => {
                        document.getElementById('error-container').classList.remove('show');
                        window.location.reload();
                    }
                }
            );
        });
        
        window.addEventListener('unhandledrejection', (event) => {
            console.error('Unhandled promise rejection:', event.reason);
            window.RinaWarpBootstrap.showError(
                'ðŸš¨ Promise Error',
                `Promise rejection: ${event.reason}`,
                {
                    onRetry: () => {
                        document.getElementById('error-container').classList.remove('show');
                        window.location.reload();
                    }
                }
            );
        });
    </script>
</body>
</html>
